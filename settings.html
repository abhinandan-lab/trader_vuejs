<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="test_main.css">
</head>

<body>


    <!-- latest header -->
    <div class="full_width bg_card">
        <div class="top_header ">
            <p> {{ welcome username }} </p>


            <div class="logged_user">
                <button class="btn-common">settings</button>
                <button class="btn-common">logout</button>
                <div class="profilepic">
                    <img src="https://placehold.co/30" alt="user profile">
                </div>

                <div class="themebox">
                    <!-- dont delete the below empty span we need it to show border left -->
                    <span></span>
                    <span>icon</span>

                    <div class="toggleUI"> <span class="icon"><i class="pi pi-moon"></i></span>
                        <div @change="toggleTheme" class="toggle-container">
                            <input type="checkbox" id="toggle" class="toggle-checkbox" v-model="theme.isDark" />
                            <label for="toggle" class="toggle-label">
                                <span class="toggle-circle">
                                    <!-- <i :class="theme.isDark ? 'pi pi-moon' : 'pi pi-sun'"></i> -->
                                </span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>


        </div>


    </div>


    <div class="full_width">
        <div class=" bg_card settings">
          <h1>{{ isRegistering ? 'Register' : 'Login' }}</h1>
    
          <div class="form_div">
    
            <div class="right">
              <div class="form_control">
                <div class="profile_circle">
                  <img  :src="previewImage || 'https://placehold.co/150'"  alt="profile pic">
                  <input style="display: none;" id="profile-pic" type="file" accept="image/*" ref="fileInput" @change="handleFileChange" hidden />
                  <button @click="triggerFileInput" v-if="isRegistering" class="edit btn-common"><i class="pi pi-pencil"></i></button>
                </div>
              </div>
            </div>
            <div class="left">
    
    
              <div class="form_control">
                <label for="email">Email</label>
                <input v-model="email" type="email" placeholder="Enter your email" required />
              </div>
    
              <div class="form_control">
                <label for="password">Password</label>
                <div class="password_flex">
                  <input v-model="password" :type="isPasswordVisible ? 'text' : 'password'"
                    placeholder="Enter your password" required />
                  <button @click.prevent="togglePasswordVisibility" class="btn-common">
                    <i :class="isPasswordVisible ? 'pi pi-eye-slash' : 'pi pi-eye'"></i>
                  </button>
                </div>
              </div>
    
              <div v-if="isRegistering" class="form_control">
                <label for="confirm-password">Confirm Password</label>
                <div class="password_flex">
                  <input v-model="confirmPassword" :type="isPasswordVisible ? 'text' : 'password'"
                    placeholder="Confirm your password" required />
                </div>
              </div>
    
              <div class="form_control">
                <div class="submit_div">
                  <button @click="handleSubmit" class="btn-primary">
                    {{ isRegistering ? 'Register' : 'Login' }}
                  </button>
                </div>
              </div>
    
              <div class="form_control">
                <p class="">
                  {{ isRegistering
                    ? 'Already have an account?'
                    : "Don't have an account?" }}
                  <a href="#" @click.prevent="toggleForm">
                    {{ isRegistering ? 'Login' : 'Register' }}
                  </a>
                </p>
              </div>
            </div>
    
          </div>
    
          <!-- Display messages -->
          <div v-if="errorMessage" class="error_message">
            {{ errorMessage }}
          </div>
          <div v-if="successMessage" class="success_message">
            {{ successMessage }}
          </div>
        </div>
      </div>



</body>

</html>